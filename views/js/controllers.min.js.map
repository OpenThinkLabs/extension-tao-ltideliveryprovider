{"version":3,"sources":["routes.js","DeliveryTool/launchQueue.js"],"names":["define","DeliveryTool","actions","launchQueue","_","$","_defaultParams","relaunchInterval","relaunchIntervalDeviation","start","interval","deviation","loaderScript","params","data","defaults","parseInt","Math","random","runUrl","setTimeout","window","location"],"mappings":"AAAAA,OAAA,yCACAC,cACAC,SACAC,YAAA,0CCgBAH,OAAA,2DACA,SACA,UACA,SAAAI,EAAAC,GACA,YAEA,IAAAC,iBACAC,iBAAA,GACAC,0BAAA,EAMA,QACAC,MAAA,WACA,GAEAC,UACAC,UAHAC,aAAAP,EAAA,eACAQ,OAAAD,aAAAE,KAAA,SAIAD,QAAAT,EAAAW,SAAAF,OAAAP,gBAEAI,SAAAG,OAAAN,iBACAI,UAAAK,SAAAH,OAAAL,2BAAAS,KAAAC,SAAAF,SAAAH,OAAAL,2BAAA,EACAE,SAAA,KAAAA,SAAAC,WAEAE,OAAAM,QACAC,WAAA;AACAC,OAAAC,SAAAT,OAAAM,QACAT","file":"routes.js.map","sourcesContent":["define('ltiDeliveryProvider/controller/routes',{\r\n    'DeliveryTool' : {\r\n        'actions' : {\r\n            'launchQueue' : 'controller/DeliveryTool/launchQueue'\r\n        }\r\n    }\r\n});\r\n\n","/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA;\r\n *\r\n */\r\n\r\ndefine('ltiDeliveryProvider/controller/DeliveryTool/launchQueue',[\r\n    'lodash',\r\n    'jquery'\r\n], function (_, $) {\r\n    'use strict';\r\n\r\n    var _defaultParams = {\r\n        \"relaunchInterval\" : 30,\r\n        \"relaunchIntervalDeviation\" : 5\r\n    };\r\n\r\n    /**\r\n     * @exports\r\n     */\r\n    return {\r\n        start: function() {\r\n            var loaderScript = $('#amd-loader');\r\n            var params = loaderScript.data('params');\r\n            var interval;\r\n            var deviation;\r\n\r\n            params = _.defaults(params, _defaultParams);\r\n\r\n            interval = params.relaunchInterval;\r\n            deviation = parseInt(params.relaunchIntervalDeviation) - (Math.random() * parseInt(params.relaunchIntervalDeviation) * 2);\r\n            interval = (interval + deviation) * 1000;\r\n\r\n            if (params.runUrl) {\r\n                setTimeout(function () {\r\n                    window.location = params.runUrl;\r\n                }, interval);\r\n            }\r\n        }\r\n    };\r\n});\r\n\n"]}